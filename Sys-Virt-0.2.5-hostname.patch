diff -rup Sys-Virt-0.2.4.orig/t/100-connect.t Sys-Virt-0.2.4.new/t/100-connect.t
--- Sys-Virt-0.2.4.orig/t/100-connect.t	2010-05-19 07:56:18.000000000 -0400
+++ Sys-Virt-0.2.4.new/t/100-connect.t	2010-08-14 16:06:45.987592899 -0400
@@ -67,6 +67,7 @@ is($max, 32, "max cpus");
 
 my $thishost = hostname();
 my ($canonhost, $other) = gethostbyname($thishost);
+$canonhost = $thishost unless $canonhost;
 my $host = $conn->get_hostname();
 is($host, $canonhost, "hostname");
 
